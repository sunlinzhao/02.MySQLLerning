# MySQLLerning

# 一、简介

为什么使用数据库？为了持久化数据，MYSQL是开源的关系型数据库

> E-R(entity-relationship，实体·联系)模型中有三个主要概念是: 实体集、属性、联系集;
>
> 一个实体集(class)对应于数据库中的一个表(table)，一个实体(instance)则对应于数据库表中的一行(row)，也称为一条记录(record)。一个属性(attribute)对应于数据库表中的一列(column)，也称为一个字段(field)。
>
> ORM思想：
>
> ORM思想(object Relational mapping)体现:
>
> - 教据库中的一个表 <---> Java或Python中的一个类;
> - 表中的一条数据 <---> 类中的一个对象(或实体);
> - 表中的一个列 <---> 类中的一个字段、属性(field);

# 二、select 与 运算符

## 1. SQL语言规范

SQL(Structured QueryLanguage，结构化查询语吉)是使用关系模型的教据库应用语言，与数据直接打交道，由IBM 上世纪70年代开发出来。后由美国国家标准局(ANSI)开始着手制定SQL标准，先后有SQL-86，SQL-89，SQL-92，SQL-99等标准

- SQL有两个重要的标准，分别是 SQL92 和 SQL99，它们分别代表了 92 年和 99 年颁布的 SQL 标准，我们今天使用的 SQL语言依然遵循这些标准。

![image.png](assets/image1.png)

### （1）SQL分类

SQL语言在功能上主要分为如下3大类:

- DDL(Data Definition Languages、数据定义语言)，这些语句定义了不同的数据库、表、视图、索引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构；

  > 主要的语句关键字包括 CREATE、DROP、ALTER 等.
  >
- DML(Data Manipulation Language、数据操作语言)，用于添加、删除、更新和查询数据库记录，并检查数据完整性；

  > - 主要的语句关键字包括 INSERT、DELETE、UPDATE、SELECT 等;
  > - SELECT 是 SQL 语言的基础，最为重要;
  >
- DCL(Data ControlLanguage、数据控制语言)，用于定义数据库、表、字段、用户的访问权限和安全级别。

  > 主要的语句关键字包括 GRANT、REVOKE、COMMIT、ROLLBACK、SAVEPOINT 等。
  >

因为查询语句使用的非常的频繁，所以很多人把查询语句单拎出来一类: DQL(数据查询语言)。还有单独将 COMMIT、ROLLBACK 取出来称为TCL(Transaction Control Language，事务控制语言)。

### （2）SQL 规则与规范

1. 基本规则 👀️

- SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进；
- 每条命令以;或 \g 或 \G 结束；
- 关键字不能被缩写也不能分行；
- 关于标点符号
  - 必须保证所有的()、单引号、双引号是成对结束的；
  - 必须便用英文状态下的半角输入方式；
  - 字符串型和日期时间类型的数据可以使用单引号('')表示；
  - 列的别名，尽量使用双引号("")，而且不建议省略 as ；

2. SQL 大小写规范 👀️

- MySQL 在 Windows 环境下是大小写不敏感的；
- MySQL 在 Linux 环境下是大小写敏感的；
  - 数据库名、表名、表的别名、变量名是严格区分大小写的；
  - 关键字、函数名、列名(或字段名)、列的别名(字段的别名)是忽略大小写的。
- 推荐采用统一的书写规范：
  - 数据库名、表名、表别名、字段名、字段别名等都小写 SQL关键字、函数名、绑定变量等都大写；

3. 注释

可以使用如下格式的注释结构：

```sql
单行注释: # 注释文字(MySQL特有的方式)
单行注释: -- 注释文字(--后面必须包含一个空格。)
多行注释: /* 注释文字 */
```

4. 命名规则
   - 数据库、表名不得超过30个字符，变量名限制为29个；
   - 必须只能包含A-Z a-z 0-9，共63个字符；
   - 数据库名、表名、字段名等对象名中间不要包含空格；
   - 同一个 MySQL 软件中，数据库不能同名;
   - 同一个库中，表不能重名;
   - 同一个表中，字段不能重名必须保证你的字段没有和保留字、数据库系统或常用方法冲突，如果坚持使用，请在SQL句中使用'(着重号)引起来；
   - 保持字段名和类型的一致性，在命名字段并为其指定数据类型的时候一定要保证一致性，假如数据类型在一个表里是整数，那在另一个表里可就别变成字符型了；
5. 数据导入指令

在命令行客户端登录 mySql，使用 source 指令导入

```bash
mysq1> source d:\student.sql
```

## 2. select 与 运算符

### （1）select

```sql
SELECT [feild...]/[*] 
FROM [table_...] 
WHERE [condition_...];
```

- 显示表结构：DESC [表名]；

### （2）算数运算符

1. 加减

在 Java 中，+的左右两边如果有字符串，那么表示字符串的拼接。但是在MySQL中+只表示数值相加，如果遇到非数值类型，先尝试转成数值，如果转失败，就按0计算。(补充:My5QL中字符串拼接要便用字符串函数CONCAT()实现);

```sql
SELECT 1+1, 2+3, 5-2 FROM dual;
SELECT 1+1, 2+3, 5-2;
```

> mysql中的dual表：
>
> - 在 MySQL 和 SQLServer 中可以直接 `se1ect 1`不需要加 from 表名就可以执行, 而在 Oracle 中要满足`select from`的结构: `select 1`不能实现满足上述结构，于是Oracle引入dual虚拟表来满足结构;
> - Oracle 这样表示: select 1 from dual;
> - 在 mysql 里也存在和 oracle 里类似的 dual 虚拟表: 官方声明纯粹是为了满足 `select...from...`C这一习惯问题mysql会忽略对该表的引用;

2. 乘除

```sql
SELECT 1000/1, 100/0;
```

- 一个数乘以整教1和除以整教1后仍得原数;
- 一个数乘以浮点数1和除以浮点数1后变成浮点数，数值与原数相等;
- 一个数除以整数后，不管是否能除尽，结果都为一个浮点数; 👀️
- 一个数除以另一个数，除不尽时，结果为一个浮点数，并保留到小数点后4位；👀️
- 乘法和除法的优先级相同，进行先乘后除操作与先除后乘操作，得出的结果相同,在数学运算中，0 不能用作除数，在 MySQL 中，一个数除以 0 为 NULL；

3. 求模（取余）运算符

```sql
SELECT 1000 % 3, 100 % 5;
SELECT 4 DIV 2, 6 MOD 5;
```

### （3）比较运算符

1. 符号类

```sql
SELECT 100=50*2, 100=null, null=null, 100<=>null, null<=>null;
-- 1,null,null,0,1
```

> 比较运算符用来对表达式左边的操作数和右边的操作数进行比较，比较的结果为真则返回1，比较的结果为假则返回0，其他情况则返回NULL。
> 比较运算符经常被用来作为SELECT查询语句的条件来便用，返回符合条件的结果记录。

![image.png](assets/image2.png)

> 安全等于运算符(<=>)与等于运算符(=)的作用是相似的，唯一的区别是'<=>'可以用来对NULL进行判断。在两个操作数均为 NULL 时，其返回值为 1，而不为NULL;当一个操作数为NULL时，其返回值为 0，而不为NULL.

2. 非符号类

```sql
SELECT 50 BETWEEN 10 AND 100;
```

![image.png](assets/image3.png)

### （4）逻辑运算符

```sql
SELECT !(1=1), NOT (1=1) AND (2=1), (1=1) OR (1=2), 2 OR 5;
```

MySQL中支持4种逻辑运算符如下: 逻辑运算符主要用来判断表达式的真假，在MYSQL中，逻辑运算的返回结果为1、0或者NULL。

![image.png](assets/image4.png)

- 运算符优先级：

![image.png](assets/image5.png)

数字编号越大，优先级越高，优先级高的运算符先进行计算，可以看到，赋值运算的优先级最低，使用“()“括起来的表达式的优先级别最高。

----
